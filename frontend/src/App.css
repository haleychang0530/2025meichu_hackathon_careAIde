/* 引入 Google Fonts - Nunito 字體 */
@import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap');

/* 全域設定：重置頁面樣式並設定基本字體 */
html, body, #root {
  height: 100%;
  width: 100%;
  margin: 0;
  font-family: "Arial", sans-serif;
}

/* 主應用容器：設定為全螢幕的垂直布局 */
.app-container {
  display: flex;
  flex-direction: column;
  height: 100vh;
  width: 100%;
  background-color: #fff8e1; /* 溫暖的米黃色背景 */
  position: relative; /* 用於定位齒輪圖標和設定面板 */
}

/* 聊天區域容器：可滾動的主要對話區域 */
.chat-container {
  flex: 1; /* 佔據剩餘空間 */
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 20px; /* 訊息間的間距 */
  overflow-y: auto; /* 允許垂直滾動 */
  width: 100%;
}

/* 訊息行容器：控制訊息的對齊方式 */
.message-row {
  display: flex;
}

/* AI 訊息：靠左對齊 */
.message-row.left {
  justify-content: flex-start;
}

/* 使用者訊息：靠右對齊 */
.message-row.right {
  justify-content: flex-end;
  padding-right: 40px; /* 增加右側內邊距 */
}

/* 訊息氣泡：基本樣式 */
.message-bubble {
  padding: 16px 20px;
  border-radius: 20px; /* 圓角氣泡效果 */
  max-width: 60%; /* 限制最大寬度避免過寬 */
  font-size: 1.8rem; /* 老人友善的大字體 */
  line-height: 1.8em;
  word-break: break-word; /* 長單字自動換行 */
}

/* 使用者訊息氣泡：橙色主題 */
.message-bubble.user {
  background-color: #F5A623;
  color: #333;
}

/* AI 訊息氣泡：綠色主題 */
.message-bubble.ai {
  background-color: #88bb35;
  color: #000;
  font-weight: bold;
}

/* 語音控制按鈕容器 */
.voice-buttons {
  display: flex;
  gap: 10px; /* 播放和停止按鈕之間的間距 */
  margin-top: 10px;
}

/* 語音播放和停止按鈕樣式 */
.play-button,
.stop-button,
.expand-steps-btn {
  padding: 4px 8px;
  font-size: 1.9rem;
  background-color: #84a84a; /* 默認綠色 */
  color: #fff;
  border: none;
  border-radius: 10px;
  cursor: pointer;
}

/* 停止按鈕：紅色主題 */
.stop-button {
  background-color: #d9534f; 
}

.expand-steps-btn{
  background-color:#4CAF50;;
}

/* 語音按鈕懸停效果 */
.play-button:hover,
.stop-button:hover {
  opacity: 0.8;
}

/* 輸入區域容器：底部固定的輸入欄 */
.input-container {
  display: flex;
  padding: 12px 20px;
  border-top: 1px solid #ffd54f; /* 分隔線 */
  background-color: #fff3e0; /* 淺橙色背景 */
  width: 100%;
  box-sizing: border-box;
  justify-content: center;
  align-items: center; /* 垂直居中對齊 */
}

/* 輸入區域按鈕樣式 */
.input-container button {
  background-color: #c28c17; /* 橙棕色 */
  color: white;
  border: none;
  padding: 12px 20px;
  font-size: 1.5rem; /* 老人友善的大字體 */
  border-radius: 15px;
  cursor: pointer;
  margin-left: 10px;
}

/* 錄音中的按鈕狀態 */
.input-container button.recording {
  background-color: #F5A623; /* 錄音時變為亮橙色 */
}

/* 文字輸入框樣式 */
.text-input {
  flex: 1; /* 佔據剩餘空間 */
  padding: 12px 20px;
  font-size: 1.5rem; /* 老人友善的大字體 */
  border: 1px solid #ccc;
  border-radius: 15px;
  margin-right: 10px;
  box-sizing: border-box;
}

/* Logo 容器：應用標題區域 */
.logo-container {
  text-align: center;
  margin-bottom: 20px;
  font-family: 'Nunito', sans-serif; /* 使用 Nunito 字體 */
  font-size: 2rem;
  color: #F5A623; /* Care 和 de 的橙色 */
  opacity: 1;
  transition: opacity 1s ease-out; /* 漸隱動畫 */
}

/* Logo 漸隱效果：第一條訊息後觸發 */
.logo-container.fade-out {
  opacity: 0; /* 透明 */
  height: 0; /* 高度歸零 */
  margin-bottom: 0; /* 移除下邊距 */
  overflow: hidden; /* 隱藏內容 */
  pointer-events: none; /* 禁用滑鼠事件 */
}

/* Logo 中的 AI 文字：綠色強調 */
.logo-container .highlight-ai {
  color: #29ab29;
}

/* 設定齒輪圖標：右上角固定位置 */
.settings-icon {
  position: absolute;
  top: 20px;
  right: 20px;
  font-size: 2.3rem;
  cursor: pointer;
  z-index: 1000; /* 確保在最上層 */
  padding: 10px;
  border-radius: 50%; /* 圓形背景 */
  background-color: rgba(255, 255, 255, 0.8); /* 半透明白色背景 */
  transition: background-color 0.3s ease;
}

/* 齒輪圖標懸停效果 */
.settings-icon:hover {
  background-color: rgba(255, 255, 255, 1); /* 完全不透明 */
}

/* 設定面板：下拉式設定選單 */
.settings-panel {
  position: absolute;
  top: 60px; /* 位於齒輪圖標下方 */
  right: 20px;
  width: 320px; /* 稍微加寬以容納 Demo 模式 */
  background-color: #fff;
  border: 1px solid #ccc;
  border-radius: 10px;
  padding: 20px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* 陰影效果 */
  z-index: 999;
}

/* 設定面板標題 */
.settings-panel h3 {
  margin: 0 0 15px;
  font-size: 1.2rem;
  color: #333;
}

/* Demo 模式區域 */
.demo-mode {
  margin-bottom: 20px;
  padding: 15px;
  background-color: #f0f8ff; /* 淡藍色背景突出 Demo 模式 */
  border-radius: 8px;
  border: 2px dashed #4a90e2; /* 虛線邊框表示這是特殊模式 */
}

.demo-mode label {
  display: flex;
  align-items: center;
  font-size: 1rem;
  color: #333;
  cursor: pointer;
}

.demo-mode input[type="checkbox"] {
  margin-right: 8px;
  transform: scale(1.2); /* 放大核取方塊 */
}

/* 語音輸出設定區域 */
.voice-output {
  margin-bottom: 0; /* 移除底部間距，因為現在它在最下方 */
}

/* 設定面板內的標籤文字 */
.voice-output label {
  display: block;
  margin-bottom: 10px;
  font-size: 1rem;
  color: #333;
}

/* 語音語言選擇的膠囊按鈕容器 */
.voice-toggle {
  display: flex;
  border-radius: 25px; /* 膠囊形狀 */
  overflow: hidden;
  border: 2px solid #29ab29; /* 綠色邊框 */
}

/* 膠囊按鈕樣式 */
.toggle-btn {
  flex: 1; /* 平均分配空間 */
  padding: 10px 20px;
  border: none;
  background-color: #f8f8f8; /* 未選中時的淺灰色 */
  color: #333;
  cursor: pointer;
  transition: all 0.3s ease; /* 平滑過渡效果 */
  font-size: 1rem;
}

/* 選中狀態的膠囊按鈕 */
.toggle-btn.active {
  background-color: #29ab29; /* 綠色背景 */
  color: white;
}

/* 未選中按鈕的懸停效果 */
.toggle-btn:hover:not(.active) {
  background-color: #e8e8e8;
}

/* Gmail 輸入區域容器 */
.email-input {
  display: flex;
  flex-direction: column;
  margin-bottom: 20px;
}

/* Gmail 區域的標籤 */
.email-input label {
  margin-bottom: 10px;
  font-size: 1rem;
  color: #333;
}

/* Gmail 輸入框 */
.email-input input {
  padding: 10px;
  margin-bottom: 10px;
  border: 1px solid #ccc;
  border-radius: 5px;
  font-size: 1rem;
}

/* Gmail 提交按鈕 */
.email-input button {
  padding: 10px;
  background-color: #29ab29; /* 綠色主題 */
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 1rem;
  transition: background-color 0.3s ease;
}

/* Gmail 按鈕懸停效果 */
.email-input button:hover {
  background-color: #218c21; /* 深一點的綠色 */
}

/* ===== AI思考動畫樣式 ===== */

/* AI思考中的訊息氣泡樣式 */
.message-bubble.ai.thinking {
  background: linear-gradient(135deg, #e8f5e8 0%, #d4f4d4 100%) !important;
  border: 2px dashed #29ab29 !important;
  color: #2d6e2d !important;
}

/* 思考指示器容器 */
.thinking-indicator {
  display: flex;
  align-items: center;
  gap: 15px;
  padding: 12px 0;
}

/* 思考中的文字樣式 */
.thinking-text {
  color: #29ab29;
  font-weight: 600;
  font-size: 1.6rem; /* 配合老人友善的大字體 */
  line-height: 1.5;
}

/* 轉圈圈動畫 */
.spinner {
  width: 28px;
  height: 28px;
  border: 4px solid #d4f4d4;
  border-top: 4px solid #29ab29;
  border-radius: 50%;
  animation: spin 1.2s linear infinite;
  flex-shrink: 0; /* 防止動畫被壓縮 */
}

/* 轉圈圈關鍵幀動畫 */
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* 輸入區域禁用狀態樣式 */
.input-container input:disabled,
.input-container button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  background-color: #f5f5f5 !important;
}

.input-container button:disabled {
  background-color: #cccccc !important;
  color: #999999 !important;
}

/* 禁用狀態下移除懸停效果 */
.input-container button:disabled:hover {
  background-color: #cccccc !important;
  transform: none;
  opacity: 0.5;
}

/* 手機版響應式設計 */
@media (max-width: 768px) {
  .spinner {
    width: 32px;
    height: 32px;
    border-width: 5px;
  }
  
  .thinking-text {
    font-size: 1.8rem;
  }
  
  .thinking-indicator {
    gap: 18px;
    padding: 15px 0;
  }

  /* 手機版訊息氣泡調整 */
  .message-bubble.ai.thinking {
    max-width: 80%;
  }
}

.message-bubble.ai h1, .message-bubble.ai h2, .message-bubble.ai h3 {
  margin: 0.5em 0;
  color: inherit;
}

.message-bubble.ai code {
  background-color: rgba(0,0,0,0.1);
  padding: 2px 4px;
  border-radius: 3px;
  font-family: monospace;
}

.message-bubble.ai pre {
  background-color: rgba(0,0,0,0.1);
  padding: 10px;
  border-radius: 5px;
  overflow-x: auto;
  margin: 10px 0;
}

.message-bubble.ai ul, .message-bubble.ai ol {
  padding-left: 20px;
  margin: 10px 0;
}

.message-bubble.ai a {
  color: #0066cc;
  text-decoration: underline;
}

/* 技術支援相關樣式 */
.tech-support-prompt {
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid #e0e0e0;
}

/*.expand-steps-btn {
  background: #4CAF50;
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 20px;
  cursor: pointer;
  font-size: 28px;
  transition: background-color 0.3s;
} */

.expand-steps-btn:hover {
  background: #45a049;
}

.tech-steps-panel {
  position: fixed;
  align-items: center; /* 讓子元素在垂直方向上居中對齊 */
  left: 0;
  top: 0;
  width: 600px;
  height: 100vh;
  background: #fff8e1;
  border-right: 2px solid #ddd;
  box-shadow: 2px 0 10px rgba(0,0,0,0.1);
  z-index: 1000;
  overflow-y: auto;
  transition: transform 0.3s ease;
}

.tech-steps-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px;
  border-bottom: 1px solid #eee;
  background: #f8f9fa;
  font-size: 30px;
}

.close-steps-btn {
  background: none;
  border: none;
  font-size: 30px;
  cursor: pointer;
  width: 30px;
  height: 15px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.close-steps-btn:hover{
  background-color: rgba(0, 0, 0, 0.1);
}

.close-steps-btn:active{
  background-color: rgba(0, 0, 0, 0.2);
}

.tech-steps-list {
  padding: 0px;
  font-size: 25px;
}

/* 技術支援步驟列表中的單個步驟項目 */
.tech-step {
  display: flex; /* 啟用 Flexbox */
  align-items: flex-start; /* 讓所有內容從上方對齊，而不是居中 */
  margin-bottom: 2px;
  padding: 5px;
}

/* 步驟勾選框容器：確保勾選框在最左邊 */
.tech-step .step-checkbox {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  flex-shrink: 0; /* 防止縮小 */
  margin-right: 15px; /* 與文字內容的間距 */
  margin-top: 5px; /* 新增：將勾選框稍微向下移動，與標題對齊 */
}

/* 步驟文字內容容器：確保標題和描述在垂直方向上排列 */
.tech-step .step-content {
  display: flex;
  flex-direction: column; /* 將子元素（h4, p）垂直排列 */
}

/* 調整 h4 和 p 標籤的間距 */
.tech-step .step-content h4 {
  margin: 0;
  font-size: 1.2em; /* 調整字體大小 */
}

.tech-step .step-content p {
  margin: 0;
  font-size: 0.9em; /* 調整字體大小 */
  color: #666; /* 調整顏色 */
}

/* 隱藏原生的 checkbox */
.tech-step input[type="checkbox"] {
  /* 讓原生 checkbox 不可見，但仍可被讀屏軟體識別 */
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
}

/* 建立自訂的 checkbox 外觀 */
.tech-step .step-checkbox label::after {
  content: '';
  display: inline-block;
  width: 24px; /* 設定你想要的大小 */
  height: 24px;
  border: 2px solid #ccc; /* 邊框顏色 */
  border-radius: 6px; /* 圓角 */
  background-color: #f0f0f0;
  transition: all 0.2s ease-in-out;
}

/* 選中時的樣式 */
.tech-step input[type="checkbox"]:checked + label::after {
  background-color: #28a745; /* 選中時的背景色，綠色 */
  border-color: #28a745;
}

/* 在選中時加入勾選圖標 */
.tech-step input[type="checkbox"]:checked + label::before {
  content: '✔'; /* 勾選符號 */
  font-size: 16px;
  color: white; /* 勾勾顏色 */
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%); /* 居中對齊 */
  pointer-events: none; /* 讓點擊事件穿透到下層的 label */
}

/* 調整 .step-checkbox 和 .tech-step 的 flexbox 排列 */
.tech-step .step-checkbox {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  flex-shrink: 0; /* 防止縮小 */
  margin-right: 15px; /* 與文字內容的間距 */
}

/* 步驟語音按鈕樣式 */
.step-voice-btn {
  background: none;
  border: none;
  font-size: 16px;
  cursor: pointer;
  padding: 5px;
  margin-left: 10px;
  border-radius: 50%;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #f0f0f0;
  transition: background-color 0.2s;
}

.step-voice-btn:hover {
  background-color: #e0e0e0;
}

.tech-step {
  display: flex;
  align-items: flex-start;
  padding: 10px;
  border-bottom: 1px solid #eee;
}

.step-content {
  flex: 1;
  display: flex;
  align-items: flex-start;
}

.step-number {
  background-color: #29ab29;
  color: white;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 10px;
  margin-bottom: 10px;
  font-size: 12px;
  font-weight: bold;
}

.step-details {
  flex: 1;
}

.step-details h4 {
  margin: 0 0 5px 0;
  font-size: 14px;
}

.step-details p {
  margin: 0;
  font-size: 13px;
  color: #666;
}

/* 新增語音處理中的容器樣式 */
.processing-indicator {
  display: flex;
  align-items: center;
  color: #888;
  font-size: 20px;
}

/* 沿用或調整思考中的旋轉動畫 */
.processing-indicator .spinner {
  border: 2px solid #f3f3f3;
  border-top: 2px solid #555;
  border-radius: 50%;
  width: 25px;
  height: 25px;
  animation: spin 1s linear infinite;
  margin-right: 8px;
}

/* 保持現有的動畫 */
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

